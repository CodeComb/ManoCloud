@model User
@{
    ViewBag.Title = Model.Name;
    var Colors = new string[]
    {
        "rgb(124, 175, 0)",
        "rgb(168, 211, 36)",
        "rgb(22, 165, 215)",
        "rgb(22, 165, 215)",
        "rgb(73, 124, 240)",
        "rgb(152, 118, 252)",
        "rgb(240, 73, 73)",
        "rgb(255, 143, 69)",
        "rgb(249, 196, 54)"
    };
    var ProgrammingSkills = Model.Skills.Where(x => x.Type == TechnologyType.编程语言).ToList();
    var FrameworkSkills = Model.Skills.Where(x => x.Type != TechnologyType.编程语言).ToList();
    var Experiences = Model.Experiences.OrderByDescending(x => x.End).ToList();
    var Educations = Model.Educations.OrderByDescending(x => x.End).ToList();
    var Projects = Model.Projects.OrderByDescending(x => x.Begin).ToList();
}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title - 个人简历</title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
    <link rel="stylesheet" href="~/assets/metro/styles/style.css">
    <link rel="stylesheet" href="~/assets/metro/styles/responsive.css">
    <link rel="stylesheet" href="~/assets/metro/styles/prettyPhoto.css">
    <link rel="stylesheet" href="~/assets/metro/styles/colorpicker.css">
    <script src="~/assets/metro/scripts/jquery-1.10.2.min.js"></script>
    <script src="~/assets/metro/scripts/jquery.tools.min.js"></script>
    <script src="~/assets/metro/scripts/jquery.easing.js"></script>
    <script src="~/assets/metro/scripts/jquery.isotope.min.js"></script>
    <script src="~/assets/metro/scripts/main.js"></script>
    <script src="~/assets/metro/scripts/jquery.prettyPhoto.js"></script>
    <script src="~/assets/metro/scripts/colorpicker.js"></script>
    <script src="~/assets/metro/scripts/modernizr.min.js"></script>
    <script src="~/assets/metro/scripts/chart.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=g6DcirKK7FlGGGoiLwslU9kL"></script>
    <!--[if lt IE 9]>
        <script src="/assets/metro/scripts/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
    <div id="page">
        <header id="header">
            <ul id="nav_tabs">
                <li class="splash">
                    <a href="#splash">
                        <div id="profile_photo">
                            <img src="/file/download/@Model.AvatarId" height="150" width="150" alt="Title Example">
                        </div>
                        <div id="profile_name">
                            <div id="author_name">
                                <div class="profile_inner">
                                    <!-- You can edit name and lastname -->
                                    <div class="name">@Model.Name</div>
                                    <div class="pos">@Model.Position</div>
                                    <div class="pos">@(DateTime.Now.Year - Model.Birthday.Year)岁 @Model.Province @Model.City</div>
                                </div>
                            </div>
                        </div>
                    </a>
                </li>
                <li class="profile"><a href="#profile"><span class="icon">a</span></a></li>
                <li class="portfolio"><a href="#portfolio"><span class="icon">b</span></a></li>
                <li class="contacts"><a href="#contacts"><span class="icon">c</span></a></li>
            </ul>
        </header><!-- /Header -->
        <div id="main">
            <div id="tab_section">
                <div id="splash" class="tab_content">
                    <!-- Main page -->
                    <div class="author_info">
                        <div class="user_desc">@Html.Sanitize(Html.Marked(Model.Introduction).ToString())</div>
                        <div class="phone_num">
                            <span class="icon"></span>
                            <span class="phone">@Model.PhoneNumber</span>
                        </div>
                        <div class="addition">
                            <span class="email"><a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="9fd5b1f5f0f7f1ecf0f1dff8f2fef6f3b1fcf0f2">[email&#160;protected]</a>
                            <script data-cfhash='f9e31' type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></span>
                            <span class="website"><a href="#">http://www.jjohnson.com</a></span>
                        </div>
                    </div>
                    <div class="social_links">
                        <ul>
                            <li><a href="#" class="icon1"><span>0</span></a></li>
                            <li><a href="#" class="icon2"><span>1</span></a></li>
                            <li><a href="#" class="icon3"><span>3</span></a></li>
                            <li><a href="#" class="icon4"><span>p</span></a></li>
                        </ul>
                    </div>
                </div><!-- /Main Page -->
                <div id="resume" class="tab_content">
                    <!-- Resume Section -->
                    <div class="section-header opened">
                        <a href="#" class="section_toggle"><span><img src="images/section_toggle.png" height="78" width="48" alt="Title Example"></span></a>
                        <h2 class="section-title icon2">
                            <span class="icon category1"></span>
                            工作经历
                        </h2>
                    </div>
                    <div class="section-content">
                        @for (var i = 0; i < Experiences.Count; i++)
                        {
                            <article class="post resume_post first @(i % 2 == 0 ?"odd":"even")">
                                <div class="resume_period category1">
                                    <span class="period_from">@Experiences.ElementAt(i).Begin.ToString("YYYY/MM")</span>
                                    <div class="period_to">@(Experiences.ElementAt(i).End.HasValue ? Experiences.ElementAt(i).End.Value.ToString("YYYY/MM") : "至今")</div>
                                </div>
                                <div class="extra_wrap">
                                    <div class="resume_header">
                                        <h4 class="post_title">
                                            <span class="post_title_icon category1 icon2"></span>
                                            @Experiences.ElementAt(i).Company
                                        </h4>
                                        <h5 class="resume_position category1">
                                            <span class="icon icon2"></span>
                                            @Experiences.ElementAt(i).Position
                                        </h5>
                                    </div>
                                    <div class="resume_content">
                                        @Html.Sanitize(Html.Marked(Experiences.ElementAt(i).Hint).ToString())
                                    </div>
                                </div>
                            </article>
                        }
                    </div>
                    <div class="section-header opened">
                        <a href="#" class="section_toggle"><span><img src="images/section_toggle.png" height="78" width="48" alt="Title Example"></span></a>
                        <h2 class="section-title icon2">
                            <span class="icon category2"></span>
                            教育经历
                        </h2>
                    </div>
                    <div class="section-content">
                        <!-- Resume Post -->
                        @for (var i = 0; i < Educations.Count; i++)
                        {
                            <article class="post resume_post @(i%2 == 0 ? "odd":"even")">
                                <div class="resume_period category2">
                                    <span class="period_from">@Educations.ElementAt(i).Begin.ToString("YYYY/MM")</span>
                                    <div class="period_to">@(Educations.ElementAt(i).End.HasValue? Educations.ElementAt(i).End.Value.ToString("YYYY/MM") : "至今")</div>
                                </div>
                                <div class="extra_wrap">
                                    <div class="resume_header">
                                        <h4 class="post_title">
                                            <span class="post_title_icon category2 icon3"></span>
                                            @Educations.ElementAt(i).School
                                        </h4>
                                        <h5 class="resume_position category2">
                                            <span class="icon icon2"></span>
                                            @Educations.ElementAt(i).Profession
                                        </h5>
                                    </div>
                                    @if (!string.IsNullOrWhiteSpace(Educations.ElementAt(i).Hint))
                                    {
                                        <div class="resume_content">
                                            @Html.Sanitize(Html.Marked(Educations.ElementAt(i).Hint).ToString())
                                        </div>
                                    }
                                </div>
                            </article>
                        }
                    </div>
                    <div class="section-header widgets_section opened">
                        <a href="#" class="section_toggle"><span><img src="images/section_toggle.png" height="78" width="48" alt="Title Example"></span></a>
                        <h2 class="section-title icon2">
                            <span class="icon"></span>
                            Skills
                        </h2>
                    </div>
                    <div class="skills_sidebar_section">
                        <!-- Skills widget -->
                        <aside class="widget-even widget widget_skills">
                            <h3 class="widget_title">编程语言技能</h3>
                            <div class="widget_inner">
                                @for (var i = 0; i < ProgrammingSkills.Count; i++)
                                {
                                    <div class="skills_row @(i == 0 ? "odd first" : "even")">
                                        <span class="progressbar">
                                            <span class="progress" style="background-color: @Colors[i % Colors.Length]">
                                                <span class="caption_wrap">
                                                    <span class="caption">@Model.Skills.ElementAt(i).Title / @Model.Skills.ElementAt(i).Display / @Model.Skills.ElementAt(i).Count 行</span>
                                                    <span class="value hidden">@Html.PercentP(Model.Skills.ElementAt(i).TotalDays)</span>
                                                </span>
                                            </span>
                                        </span>
                                    </div>
                                }
                            </div>
                        </aside>
                        <!-- /Skills widget -->
                        <!-- Skills widget -->
                        <aside class="widget-odd widget widget_skills">
                            <h3 class="widget_title">其他技能</h3>
                            <div class="widget_inner">
                                @for (var i = 0; i < ProgrammingSkills.Count; i++)
                                {
                                    <div class="skills_row @(i == 0 ? "odd first" : "even")">
                                        <span class="progressbar">
                                            <span class="progress" style="background-color: @Colors[i % Colors.Length]">
                                                <span class="caption_wrap">
                                                    <span class="caption">@Model.Skills.ElementAt(i).Title / @Model.Skills.ElementAt(i).Display</span>
                                                    <span class="value hidden">@Html.PercentF(Model.Skills.ElementAt(i).TotalDays)</span>
                                                </span>
                                            </span>
                                        </span>
                                    </div>
                                }
                            </div>
                        </aside>
                        <!-- /Skills widget -->
                    </div>
                    <div class="resume_buttons">
                        <a href="#" class="button_link download"><span>Download</span></a>
                        <a href="print.html" class="button_link"><span>Print</span></a>
                    </div>
                </div><!-- /Resume Section -->

                <div id="portfolio" class="tab_content">
                    <div class="section-header opened">
                        <a href="#" class="section_toggle"><span><img src="images/section_toggle.png" height="78" width="48" alt="Title Example"></span></a>
                        <h2 class="section-title icon2">
                            <span class="icon category1"></span>
                            我的项目
                        </h2>
                    </div>
                    <div class="section-content">
                        @for (var i = 0; i < Model.Projects.Count; i++)
                        {
                            <article class="post resume_post first @(i % 2 == 0 ?"odd":"even")">
                                <div class="resume_period category1">
                                    <span class="period_from">@Projects.ElementAt(i).Begin.ToString("YYYY/MM")</span>
                                    <div class="period_to">@(Projects.ElementAt(i).End.HasValue ? Experiences.ElementAt(i).End.Value.ToString("YYYY/MM") : "至今")</div>
                                </div>
                                <div class="extra_wrap">
                                    <div class="resume_header">
                                        <h4 class="post_title">
                                            <span class="post_title_icon category1 icon2"></span>
                                            @Projects.ElementAt(i).Tilte
                                        </h4>
                                        <h5 class="resume_position category1">
                                            <span class="icon icon2"></span>
                                            @Projects.ElementAt(i).Position
                                        </h5>
                                    </div>
                                    <div class="resume_content">
                                        @if (Projects.ElementAt(i).Verified)
                                        {
                                            <canvas id="radar-@Projects.ElementAt(i).Id" width="450" height="300"></canvas>
                                            <script>
                                                new Chart(document.getElementById("radar-@Projects.ElementAt(i).Id").getContext("2d")).Radar(@Html.ProjectRadar(Projects.ElementAt(i)), { animation: Modernizr.canvas });
                                            </script>
                                        }
                                        @Html.Sanitize(Html.Marked(Projects.ElementAt(i).Hint).ToString())
                                    </div>
                                </div>
                            </article>
                        }
                    </div>
                </div><!-- /Portfolio Section -->

                <div id="contacts" class="tab_content">
                    <!-- Contacts Section -->
                    <script type="text/javascript">
                        var map = new BMap.Map("allmap", "@(Model.Province)@(Model.City)@(Model.Address)");
                    </script>
                    <div class="map_wrap">
                        <div class="map_overlay"></div>
                        <div class="address_block">
                            @(Model.Province)@(Model.City)@(Model.Address)
                        </div>
                        <div id="bmap" class="sc_googlemap" style="width:100%; height:300px;"></div>
                    </div>
                    <div class="contacts_wrapper">
                        <div class="col1">
                            <div class="phone_num">
                                <span class="icon"></span>
                                <span class="phone">@Model.PhoneNumber</span>
                            </div>
                            <div class="addition">
                                <span class="email"><a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="53197d393c3b3d203c3d13343e323a3f7d303c3e">[email&#160;protected]</a>
                                <script data-cfhash='f9e31' type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></span>
                                <span class="website"><a href="#">http://www.jjohnson.com</a></span>
                            </div>
                            <div class="qrcode_vcard">
                                <h3 class="vcard_title">Vcard</h3>
                                <div class="vcard_inner">
                                    <div class="qrcode">
                                        <!-- To generate your own QR-code, you can use http://goqr.me/ -->
                                        <img src="images/qr.png" height="150" width="150" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col2">
                            <div class="inner">
                                <div class="contact_form">
                                    <h3 class="title">Let's keep in touch</h3>
                                    <form id="contact_form" mathod="post">
                                        <div class="field">
                                            <label class="required" for="contact_form_username">Name</label>
                                            <input id="contact_form_username" type="text" name="username">
                                        </div>
                                        <div class="field">
                                            <label class="required" for="contact_form_email">Email</label>
                                            <input id="contact_form_email" type="text" name="email">
                                        </div>
                                        <div class="field message">
                                            <label class="required" for="contact_form_message">Message</label>
                                            <textarea id="contact_form_message" name="message"></textarea>
                                        </div>
                                        <div class="button">
                                            <a href="#" class="enter"><span>Submit</span></a>
                                            <div class="req">Remember to fill out all the fields.</div>
                                        </div>
                                        <div class="result"></div>
                                    </form>
                                </div>
                                <script type="text/javascript">
											jQuery(document).ready(function() {
												jQuery(".contact_form .enter").click(function(e){
													userSubmitForm();
													e.preventDefault();
													return false;
												});
											});
											function userSubmitForm(){

    											/* Contact form messages */
    											empt = 'Name field can not be empty';
    											to_lng = 'Too long name field';
    											to_lng = 'Too long name field';
    											empt_mail = 'Too short (or empty) email address';
    											to_lng_mail = 'Too long email address';
    											incor = 'Incorrect email address';
    											mes_empt = 'Message can not be empty';
    											to_lng_mes = 'Too long message';

												var error = formValidate(jQuery(".contact_form form"), {
													error_message_show: true,
													error_message_time: 5000,
													error_message_class: "sc_infobox sc_infobox_style_error",
													error_fields_class: "error_fields_class",
													exit_after_first_error: false,
													rules: [
														{
															field: "username",
															min_length: { value: 1,	 message: empt },
															max_length: { value: 160, message: to_lng}
														},
														{
															field: "email",
															min_length: { value: 7,	 message: empt_mail },
															max_length: { value: 60, message: to_lng_mail},
															mask: { value: "^([a-z0-9_\\-]+\\\.)*[a-z0-9_\\\-]+@@[a-z0-9_\\-]+(\\\.[a-z0-9_\\-]+)*\\\.[a-z]{2,6}$", message: incor}
														},
														{
															field: "message",
															min_length: { value: 1,  message: mes_empt },
															max_length: { value: 200, message: to_lng_mes}
														}
													]
												});
												if (!error) {
													var user_name  = jQuery(".contact_form #contact_form_username").val();
													var user_email = jQuery(".contact_form #contact_form_email").val();
													var user_site  = jQuery(".contact_form #contact_form_site").val();
													var user_msg   = jQuery(".contact_form #contact_form_message").val();
													var data = {
														action: "submit_contact_form",
														user_name: user_name,
														user_email: user_email,
														user_site: user_site,
														user_msg: user_msg
													};
													jQuery.post("~/styles/sendmail.php", data, userSubmitFormResponse, "text");
												}
											}

											function userSubmitFormResponse(response) {
												var rez = JSON.parse(response);
												jQuery(".contact_form .result")
													.toggleClass("sc_infobox_style_error", false)
													.toggleClass("sc_infobox_style_success", false);
												if (rez.error == "") {
													jQuery(".contact_form .result").addClass("sc_infobox_style_success").html("Your message sent!");
													setTimeout("jQuery(\'.contact_form .result\').fadeOut(); jQuery(\'.contact_form form\').get(0).reset();", 3000);
												} else {
													jQuery(".contact_form .result").addClass("sc_infobox_style_error").html("Transmit failed!" + rez.error);
												}
												jQuery(".contact_form .result").fadeIn();
											}
                                </script>
                            </div>
                        </div>
                    </div>
                </div><!-- /Contacts Section -->

            </div>
        </div><!-- /Main -->
        <footer id="footer">
            <a href="#" id="toTop"></a>
            <div class="footer_copyright">
                Copyright &copy; 2013 - John Johnson. All rights reserved.
            </div>
        </footer>
        <script>
				jQuery(document).ready(function(){
				  	setColorPicker('bg_col');
				});
        </script>
        <div id="opt_block">
            <div class="opt_header">
                <span></span>
            </div>
            <div class="opt_row bg_color">
                <h3>background color:</h3>
                <div id="bg_col" class="colorSelector"></div>
            </div>
            <div class="opt_row bg_pat">
                <h3>Background Pattern:</h3>
                <ul class="patterns_select">
                    <li><a href="#"><img src="~/assets/metro/styles/patterns/pattern1.png" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/patterns/pattern2.png" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/patterns/pattern3.jpg" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/patterns/pattern4.png" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/patterns/pattern5.png" alt=""></a></li>
                </ul>
            </div>
            <div class="opt_row bg_img">
                <h3>Background Image:</h3>
                <ul class="bg_select">
                    <li><a href="#"><img src="~/assets/metro/styles/bg1.jpg" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/bg2.jpg" alt=""></a></li>
                    <li><a href="#"><img src="~/assets/metro/styles/bg3.jpg" alt=""></a></li>
                </ul>
            </div>
        </div>
    </div><!--/Page-->
</body>
</html>